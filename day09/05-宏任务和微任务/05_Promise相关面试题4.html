<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>12_Promise相关面试题4</title>
</head>

<body>
  <script>
    /* 
      宏:[]
      微:[]
      控制台： 

    */
    // setTimeout(() => {
    //   console.log('0')
    // }, 0)

    // new Promise((resolve, reject) => {
    //   console.log('1')
    //   resolve()
    // })
    //   .then(() => {
    //     console.log('2')
    //     new Promise((resolve, reject) => {
    //       console.log('3')
    //       resolve()
    //     })
    //       .then(() => {
    //         console.log('4')
    //       })
    //       .then(() => {
    //         console.log('5')
    //       })
    //   })
    //   .then(() => {
    //     console.log('6')
    //   })

    // new Promise((resolve, reject) => {
    //   console.log('7')
    //   resolve()
    // }).then(() => {
    //   console.log('8')
    // })
    //=============================================================================================
    // const promise1 = new Promise((resolve, reject) => {
    //   setTimeout(() => {
    //     resolve('success')
    //   }, 1000)
    // })
    // const promise2 = promise1.then(() => {
    //   throw new Error('error!!!')
    // })
    // console.log('promise1', promise1)
    // console.log('promise2', promise2)
    // setTimeout(() => {
    //   console.log('promise1', promise1)
    //   console.log('promise2', promise2)
    // }, 2000)

    // Promise.resolve(1)
    //   .then(2)
    //   .then(Promise.resolve(3))
    //   .then(console.log)
    // ===============================================================================================
    // async function async1() {
    //   console.log("async1 start");
    //   await async2();
    //   console.log("async1 end");
    // }

    // async function async2() {
    //   console.log("async2");
    // }

    // console.log("script start");

    // setTimeout(function () {
    //   console.log("setTimeout");
    // }, 0);

    // async1();

    // new Promise(function (resolve) {
    //   console.log("promise1");
    //   resolve();
    // }).then(function () {
    //   console.log("promise2");
    // });
    // console.log('script end');
    // ==============================================================================================
    // async function async1() {
    //   await async2();
    //   console.log('async1');
    //   return 'async1 success'
    // }
    // async function async2() {
    //   return new Promise((resolve, reject) => {
    //     console.log('async2')
    //     resolve('error')
    //   })
    // }
    // async1().then(res => console.log(res))
    // ==============================================================================================
    // const async1 = async () => {
    //   console.log('async1');
    //   setTimeout(() => {
    //     console.log('timer1')
    //   }, 2000)
    //   await new Promise(resolve => {
    //     console.log('promise1')
    //   })
    //   console.log('async1 end')
    //   return 'async1 success'
    // }
    // console.log('script start');
    // async1().then(res => console.log(res));
    // console.log('script end');
    // Promise.resolve(1)
    //   .then(2)
    //   .then(Promise.resolve(3))
    //   .catch(4)
    //   .then(res => console.log(res))
    // setTimeout(() => {
    //   console.log('timer2')
    // }, 1000);
    // =================================================================================================
    // const p1 = new Promise((resolve) => {
    //   setTimeout(() => {
    //     resolve('resolve3');
    //     console.log('timer1')
    //   }, 0)
    //   resolve('resovle1');
    //   resolve('resolve2');
    // }).then(res => {
    //   console.log(res)
    //   setTimeout(() => {
    //     console.log(p1)
    //   }, 1000)
    // }).finally(res => {
    //   console.log('finally', res)
    // });
    //
    // async function fn() {
    //   console.log(1);
    //   await new Promise((resolve) => {
    //     console.log(2);
    //     resolve()
    //   }).then(() => {
    //     console.log(3)
    //   }).then(() => {
    //     console.log(4)
    //   })
    //   console.log(5);
    // }
    // fn();
    // console.log(7)


    function Person(name) {
      this.name = name
      this.foo1 = function () {
        console.log(this.name)
      }
      this.foo2 = function () {
        return function () {
          console.log(this.name)
        }
      }
    }
    var person1 = new Person('person1')
    person1.foo2()();
    console.log(window.name)


    var i = 0
    function fn() {
      i++;
      if (i < 10) {
        return fn()
      } else {
        return i
      }
      console.log(i)
    }
    console.log(fn())


  </script>
</body>

</html>